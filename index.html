<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë³´ì„ ì°¾ê¸° ê²Œì„ (4X4)</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; background-color: #f0f0f0; }
        #status { margin: 20px; font-size: 1.2rem; font-weight: bold; color: #333; }
        .grid { 
            display: grid; 
            grid-template-columns: repeat(4, 80px); 
            grid-template-rows: repeat(4, 80px); 
            gap: 10px; 
            background: #bbb; 
            padding: 10px; 
            border-radius: 8px;
        }
        .cell { 
            width: 80px; height: 80px; 
            background: #fff; 
            display: flex; align-items: center; justify-content: center; 
            font-size: 2rem; cursor: pointer; border-radius: 4px;
            user-select: none;
        }
        .cell.hidden { background: #444; color: transparent; }
        .cell.revealed { background: #ddd; cursor: default; }
        .controls { margin-top: 20px; }
        button { padding: 10px 20px; font-size: 1rem; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 5px; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>

    <div id="status">ë‹¨ê³„ 1: ë³´ì„(ğŸ’) 1ê°œì™€ í­íƒ„(ğŸ’£) 2ê°œë¥¼ ë°°ì¹˜í•˜ì„¸ìš”.</div>
    
    <div class="grid" id="grid"></div>

    <div class="controls">
        <button id="startBtn">ë°°ì¹˜ ì™„ë£Œ (ENTER)</button>
    </div>

    <script>
        const gridElement = document.getElementById('grid');
        const statusText = document.getElementById('status');
        const startBtn = document.getElementById('startBtn');
        
        let gridData = Array(16).fill(null); // null, 'gem', 'bomb'
        let isPlaying = false;
        let gemCount = 0;
        let bombCount = 0;

        // ê·¸ë¦¬ë“œ ìƒì„±
        function createGrid() {
            gridElement.innerHTML = '';
            for (let i = 0; i < 16; i++) {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                cell.dataset.index = i;
                cell.onclick = () => handleCellClick(i);
                gridElement.appendChild(cell);
            }
        }

        function handleCellClick(i) {
            if (!isPlaying) {
                // ë°°ì¹˜ ë‹¨ê³„: í´ë¦­ ì‹œ ìˆœí™˜ (ë¹ˆì¹¸ -> ë³´ì„ -> í­íƒ„ -> ë¹ˆì¹¸)
                if (gridData[i] === null) {
                    if (gemCount < 1) { gridData[i] = 'gem'; gemCount++; }
                    else if (bombCount < 2) { gridData[i] = 'bomb'; bombCount++; }
                } else if (gridData[i] === 'gem') {
                    gridData[i] = 'bomb'; gemCount--; bombCount++;
                } else {
                    gridData[i] = null; bombCount--;
                }
                renderGrid();
            } else {
                // í”Œë ˆì´ ë‹¨ê³„: ìˆ¨ê²¨ì§„ ì¹¸ ê³µê°œ
                const cells = document.querySelectorAll('.cell');
                if (cells[i].classList.contains('hidden')) {
                    cells[i].classList.remove('hidden');
                    cells[i].classList.add('revealed');
                    if (gridData[i] === 'gem') {
                        statusText.innerText = "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ë³´ì„ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤!";
                        endGame();
                    } else if (gridData[i] === 'bomb') {
                        statusText.innerText = "ğŸ’¥ ì½°ê´‘! í­íƒ„ì„ ë°Ÿì•˜ìŠµë‹ˆë‹¤. ê²Œì„ ì˜¤ë²„!";
                        endGame();
                    }
                }
            }
        }

        function renderGrid() {
            const cells = document.querySelectorAll('.cell');
            cells.forEach((cell, i) => {
                cell.innerText = gridData[i] === 'gem' ? 'ğŸ’' : gridData[i] === 'bomb' ? 'ğŸ’£' : '';
            });
        }

        function startGame() {
            if (gemCount !== 1 || bombCount !== 2) {
                alert("ë³´ì„ 1ê°œì™€ í­íƒ„ 2ê°œë¥¼ ë°˜ë“œì‹œ ë°°ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤!");
                return;
            }
            isPlaying = true;
            statusText.innerText = "ë‹¨ê³„ 2: ë³´ì„ì„ ì°¾ìœ¼ì„¸ìš”! (í­íƒ„ì„ í”¼í•˜ì„¸ìš”)";
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => cell.classList.add('hidden'));
            startBtn.style.display = 'none';
        }

        function endGame() {
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => cell.classList.remove('hidden')); // ëª¨ë“  ì¹¸ ê³µê°œ
        }

        // ì—”í„°í‚¤ ë° ë²„íŠ¼ ì´ë²¤íŠ¸
        startBtn.onclick = startGame;
        window.onkeydown = (e) => { if (e.key === "Enter" && !isPlaying) startGame(); };

        createGrid();
    </script>
</body>
</html>
